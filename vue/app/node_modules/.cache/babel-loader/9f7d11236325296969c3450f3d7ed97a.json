{"remainingRequest":"C:\\Users\\Asus\\djangoProgs\\proj2\\5_Email_Automation_and_Spatial_Analysis_A\\vue\\app\\node_modules\\babel-loader\\lib\\index.js!C:\\Users\\Asus\\djangoProgs\\proj2\\5_Email_Automation_and_Spatial_Analysis_A\\vue\\app\\node_modules\\eslint-loader\\index.js??ref--13-0!C:\\Users\\Asus\\djangoProgs\\proj2\\5_Email_Automation_and_Spatial_Analysis_A\\vue\\app\\src\\auth\\AuthService.js","dependencies":[{"path":"C:\\Users\\Asus\\djangoProgs\\proj2\\5_Email_Automation_and_Spatial_Analysis_A\\vue\\app\\src\\auth\\AuthService.js","mtime":1592069987572},{"path":"C:\\Users\\Asus\\djangoProgs\\proj2\\5_Email_Automation_and_Spatial_Analysis_A\\vue\\app\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Users\\Asus\\djangoProgs\\proj2\\5_Email_Automation_and_Spatial_Analysis_A\\vue\\app\\node_modules\\babel-loader\\lib\\index.js","mtime":499162500000},{"path":"C:\\Users\\Asus\\djangoProgs\\proj2\\5_Email_Automation_and_Spatial_Analysis_A\\vue\\app\\node_modules\\eslint-loader\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMucmVnZXhwLmV4ZWMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5zdHJpbmcucmVwbGFjZSI7CmltcG9ydCBfY2xhc3NDYWxsQ2hlY2sgZnJvbSAiQzovVXNlcnMvQXN1cy9kamFuZ29Qcm9ncy9wcm9qMi81X0VtYWlsX0F1dG9tYXRpb25fYW5kX1NwYXRpYWxfQW5hbHlzaXNfQS92dWUvYXBwL25vZGVfbW9kdWxlcy9AYmFiZWwvcnVudGltZS9oZWxwZXJzL2VzbS9jbGFzc0NhbGxDaGVjayI7CmltcG9ydCBfY3JlYXRlQ2xhc3MgZnJvbSAiQzovVXNlcnMvQXN1cy9kamFuZ29Qcm9ncy9wcm9qMi81X0VtYWlsX0F1dG9tYXRpb25fYW5kX1NwYXRpYWxfQW5hbHlzaXNfQS92dWUvYXBwL25vZGVfbW9kdWxlcy9AYmFiZWwvcnVudGltZS9oZWxwZXJzL2VzbS9jcmVhdGVDbGFzcyI7CmltcG9ydCBfZGVmaW5lUHJvcGVydHkgZnJvbSAiQzovVXNlcnMvQXN1cy9kamFuZ29Qcm9ncy9wcm9qMi81X0VtYWlsX0F1dG9tYXRpb25fYW5kX1NwYXRpYWxfQW5hbHlzaXNfQS92dWUvYXBwL25vZGVfbW9kdWxlcy9AYmFiZWwvcnVudGltZS9oZWxwZXJzL2VzbS9kZWZpbmVQcm9wZXJ0eSI7CmltcG9ydCBhdXRoMCBmcm9tICdhdXRoMC1qcyc7CmltcG9ydCBFdmVudEVtaXR0ZXIgZnJvbSAnZXZlbnRlbWl0dGVyMyc7CmltcG9ydCByb3V0ZXIgZnJvbSAnLi8uLi9yb3V0ZXInOwoKdmFyIEF1dGhTZXJ2aWNlID0gLyojX19QVVJFX18qL2Z1bmN0aW9uICgpIHsKICBmdW5jdGlvbiBBdXRoU2VydmljZSgpIHsKICAgIF9jbGFzc0NhbGxDaGVjayh0aGlzLCBBdXRoU2VydmljZSk7CgogICAgX2RlZmluZVByb3BlcnR5KHRoaXMsICJhdXRoZW50aWNhdGVkIiwgdGhpcy5pc0F1dGhlbnRpY2F0ZWQoKSk7CgogICAgX2RlZmluZVByb3BlcnR5KHRoaXMsICJhdXRoTm90aWZpZXIiLCBuZXcgRXZlbnRFbWl0dGVyKCkpOwoKICAgIF9kZWZpbmVQcm9wZXJ0eSh0aGlzLCAiYXV0aDAiLCBuZXcgYXV0aDAuV2ViQXV0aCh7CiAgICAgIGRvbWFpbjogJ2Rldi16eTItc3dzaC51cy5hdXRoMC5jb20nLAogICAgICBjbGllbnRJRDogJzZkUVRwRUlIUzI5ZGhER0x4c01UTGhrb29lQXR0Qng4JywKICAgICAgcmVkaXJlY3RVcmk6ICdodHRwOi8vbG9jYWxob3N0OjgwODAvJywKICAgICAgYXVkaWVuY2U6ICdodHRwczovL2RqYW5nby12dWVqcy1hcGknLAogICAgICByZXNwb25zZVR5cGU6ICd0b2tlbiBpZF90b2tlbicsCiAgICAgIHNjb3BlOiAnb3BlbmlkIHByb2ZpbGUnCiAgICB9KSk7CgogICAgdGhpcy5sb2dpbiA9IHRoaXMubG9naW4uYmluZCh0aGlzKTsKICAgIHRoaXMuc2V0U2Vzc2lvbiA9IHRoaXMuc2V0U2Vzc2lvbi5iaW5kKHRoaXMpOwogICAgdGhpcy5sb2dvdXQgPSB0aGlzLmxvZ291dC5iaW5kKHRoaXMpOwogICAgdGhpcy5pc0F1dGhlbnRpY2F0ZWQgPSB0aGlzLmlzQXV0aGVudGljYXRlZC5iaW5kKHRoaXMpOwogICAgdGhpcy5oYW5kbGVBdXRoZW50aWNhdGlvbiA9IHRoaXMuaGFuZGxlQXV0aGVudGljYXRpb24uYmluZCh0aGlzKTsKICB9IC8vIGNyZWF0ZSBhbiBpbnN0YW5jZSBvZiBhdXRoMC5XZWJBdXRoIHdpdGggeW91cgogIC8vIEFQSSBhbmQgQ2xpZW50IGNyZWRlbnRpYWxzCgoKICBfY3JlYXRlQ2xhc3MoQXV0aFNlcnZpY2UsIFt7CiAgICBrZXk6ICJsb2dpbiIsCiAgICAvLyB0aGlzIG1ldGhvZCBjYWxscyB0aGUgYXV0aG9yaXplKCkgbWV0aG9kCiAgICAvLyB3aGljaCB0cmlnZ2VycyB0aGUgQXV0aDAgbG9naW4gcGFnZQogICAgdmFsdWU6IGZ1bmN0aW9uIGxvZ2luKCkgewogICAgICB0aGlzLmF1dGgwLmF1dGhvcml6ZSgpOwogICAgfSAvLyB0aGlzIG1ldGhvZCBjYWxscyB0aGUgcGFyc2VIYXNoKCkgbWV0aG9kIG9mIEF1dGgwCiAgICAvLyB0byBnZXQgYXV0aGVudGljYXRpb24gaW5mb3JtYXRpb24gZnJvbSB0aGUgY2FsbGJhY2sgVVJMCgogIH0sIHsKICAgIGtleTogImhhbmRsZUF1dGhlbnRpY2F0aW9uIiwKICAgIHZhbHVlOiBmdW5jdGlvbiBoYW5kbGVBdXRoZW50aWNhdGlvbigpIHsKICAgICAgdmFyIF90aGlzID0gdGhpczsKCiAgICAgIHRoaXMuYXV0aDAucGFyc2VIYXNoKGZ1bmN0aW9uIChlcnIsIGF1dGhSZXN1bHQpIHsKICAgICAgICBpZiAoYXV0aFJlc3VsdCAmJiBhdXRoUmVzdWx0LmFjY2Vzc1Rva2VuICYmIGF1dGhSZXN1bHQuaWRUb2tlbikgewogICAgICAgICAgX3RoaXMuc2V0U2Vzc2lvbihhdXRoUmVzdWx0KTsKICAgICAgICB9IGVsc2UgaWYgKGVycikgewogICAgICAgICAgY29uc29sZS5sb2coZXJyKTsKICAgICAgICAgIGFsZXJ0KCJFcnJvcjogIi5jb25jYXQoZXJyLmVycm9yLCAiLiBDaGVjayB0aGUgY29uc29sZSBmb3IgZnVydGhlciBkZXRhaWxzLiIpKTsKICAgICAgICB9CgogICAgICAgIHJvdXRlci5yZXBsYWNlKCcvJyk7CiAgICAgIH0pOwogICAgfSAvLyBzdG9yZXMgdGhlIHVzZXIncyBhY2Nlc3NfdG9rZW4sIGlkX3Rva2VuLCBhbmQgYSB0aW1lIGF0CiAgICAvLyB3aGljaCB0aGUgYWNjZXNzX3Rva2VuIHdpbGwgZXhwaXJlIGluIHRoZSBsb2NhbCBzdG9yYWdlCgogIH0sIHsKICAgIGtleTogInNldFNlc3Npb24iLAogICAgdmFsdWU6IGZ1bmN0aW9uIHNldFNlc3Npb24oYXV0aFJlc3VsdCkgewogICAgICB0aGlzLmFjY2Vzc1Rva2VuID0gYXV0aFJlc3VsdC5hY2Nlc3NUb2tlbjsKICAgICAgdGhpcy5pZFRva2VuID0gYXV0aFJlc3VsdC5pZFRva2VuOwogICAgICB0aGlzLnByb2ZpbGUgPSBhdXRoUmVzdWx0LmlkVG9rZW5QYXlsb2FkOwogICAgICB0aGlzLmV4cGlyZXNBdCA9IGF1dGhSZXN1bHQuZXhwaXJlc0luICogMTAwMCArIG5ldyBEYXRlKCkuZ2V0VGltZSgpOwogICAgICB0aGlzLmF1dGhOb3RpZmllci5lbWl0KCdhdXRoQ2hhbmdlJywgewogICAgICAgIGF1dGhlbnRpY2F0ZWQ6IHRydWUKICAgICAgfSk7CiAgICB9IC8vIHJlbW92ZSB0aGUgYWNjZXNzIGFuZCBJRCB0b2tlbnMgZnJvbSB0aGUKICAgIC8vIGxvY2FsIHN0b3JhZ2UgYW5kIGVtaXRzIHRoZSBhdXRoQ2hhbmdlIGV2ZW50CgogIH0sIHsKICAgIGtleTogImxvZ291dCIsCiAgICB2YWx1ZTogZnVuY3Rpb24gbG9nb3V0KCkgewogICAgICBkZWxldGUgdGhpcy5hY2Nlc3NUb2tlbjsKICAgICAgZGVsZXRlIHRoaXMuaWRUb2tlbjsKICAgICAgZGVsZXRlIHRoaXMuZXhwaXJlc0F0OwogICAgICB0aGlzLmF1dGhOb3RpZmllci5lbWl0KCdhdXRoQ2hhbmdlJywgZmFsc2UpOyAvLyBuYXZpZ2F0ZSB0byB0aGUgaG9tZSByb3V0ZQoKICAgICAgcm91dGVyLnJlcGxhY2UoJy8nKTsKICAgIH0gLy8gY2hlY2tzIGlmIHRoZSB1c2VyIGlzIGF1dGhlbnRpY2F0ZWQKCiAgfSwgewogICAga2V5OiAiaXNBdXRoZW50aWNhdGVkIiwKICAgIHZhbHVlOiBmdW5jdGlvbiBpc0F1dGhlbnRpY2F0ZWQoKSB7CiAgICAgIC8vIENoZWNrIHdoZXRoZXIgdGhlIGN1cnJlbnQgdGltZSBpcyBwYXN0IHRoZQogICAgICAvLyBhY2Nlc3MgdG9rZW4ncyBleHBpcnkgdGltZQogICAgICByZXR1cm4gbmV3IERhdGUoKS5nZXRUaW1lKCkgPCB0aGlzLmV4cGlyZXNBdDsKICAgIH0gLy8gYSBzdGF0aWMgbWV0aG9kIHRvIGdldCB0aGUgYWNjZXNzIHRva2VuCgogIH0sIHsKICAgIGtleTogImdldEF1dGhUb2tlbiIsCiAgICB2YWx1ZTogZnVuY3Rpb24gZ2V0QXV0aFRva2VuKCkgewogICAgICByZXR1cm4gdGhpcy5hY2Nlc3NUb2tlbjsKICAgIH0gLy8gYSBtZXRob2QgdG8gZ2V0IHRoZSBVc2VyIHByb2ZpbGUKCiAgfSwgewogICAga2V5OiAiZ2V0VXNlclByb2ZpbGUiLAogICAgdmFsdWU6IGZ1bmN0aW9uIGdldFVzZXJQcm9maWxlKGNiKSB7CiAgICAgIHJldHVybiB0aGlzLnByb2ZpbGU7CiAgICB9CiAgfV0pOwoKICByZXR1cm4gQXV0aFNlcnZpY2U7Cn0oKTsKCmV4cG9ydCB7IEF1dGhTZXJ2aWNlIGFzIGRlZmF1bHQgfTs="},{"version":3,"sources":["C:/Users/Asus/djangoProgs/proj2/5_Email_Automation_and_Spatial_Analysis_A/vue/app/src/auth/AuthService.js"],"names":["auth0","EventEmitter","router","AuthService","isAuthenticated","WebAuth","domain","clientID","redirectUri","audience","responseType","scope","login","bind","setSession","logout","handleAuthentication","authorize","parseHash","err","authResult","accessToken","idToken","console","log","alert","error","replace","profile","idTokenPayload","expiresAt","expiresIn","Date","getTime","authNotifier","emit","authenticated","cb"],"mappings":";;;;;AAAA,OAAOA,KAAP,MAAkB,UAAlB;AACA,OAAOC,YAAP,MAAyB,eAAzB;AACA,OAAOC,MAAP,MAAmB,aAAnB;;IAEqBC,W;AAInB,yBAAe;AAAA;;AAAA,2CAHC,KAAKC,eAAL,EAGD;;AAAA,0CAFA,IAAIH,YAAJ,EAEA;;AAAA,mCAUP,IAAID,KAAK,CAACK,OAAV,CAAkB;AACxBC,MAAAA,MAAM,EAAE,2BADgB;AAExBC,MAAAA,QAAQ,EAAE,kCAFc;AAGxBC,MAAAA,WAAW,EAAE,wBAHW;AAIxBC,MAAAA,QAAQ,EAAE,0BAJc;AAKxBC,MAAAA,YAAY,EAAE,gBALU;AAMxBC,MAAAA,KAAK,EAAE;AANiB,KAAlB,CAVO;;AACb,SAAKC,KAAL,GAAa,KAAKA,KAAL,CAAWC,IAAX,CAAgB,IAAhB,CAAb;AACA,SAAKC,UAAL,GAAkB,KAAKA,UAAL,CAAgBD,IAAhB,CAAqB,IAArB,CAAlB;AACA,SAAKE,MAAL,GAAc,KAAKA,MAAL,CAAYF,IAAZ,CAAiB,IAAjB,CAAd;AACA,SAAKT,eAAL,GAAuB,KAAKA,eAAL,CAAqBS,IAArB,CAA0B,IAA1B,CAAvB;AACA,SAAKG,oBAAL,GAA4B,KAAKA,oBAAL,CAA0BH,IAA1B,CAA+B,IAA/B,CAA5B;AACD,G,CAED;AACA;;;;;AAUA;AACA;4BACS;AACP,WAAKb,KAAL,CAAWiB,SAAX;AACD,K,CAED;AACA;;;;2CACwB;AAAA;;AACtB,WAAKjB,KAAL,CAAWkB,SAAX,CAAqB,UAACC,GAAD,EAAMC,UAAN,EAAqB;AACxC,YAAIA,UAAU,IAAIA,UAAU,CAACC,WAAzB,IAAwCD,UAAU,CAACE,OAAvD,EAAgE;AAC9D,UAAA,KAAI,CAACR,UAAL,CAAgBM,UAAhB;AACD,SAFD,MAEO,IAAID,GAAJ,EAAS;AACdI,UAAAA,OAAO,CAACC,GAAR,CAAYL,GAAZ;AACAM,UAAAA,KAAK,kBAAWN,GAAG,CAACO,KAAf,8CAAL;AACD;;AACDxB,QAAAA,MAAM,CAACyB,OAAP,CAAe,GAAf;AACD,OARD;AASD,K,CAED;AACA;;;;+BACYP,U,EAAY;AACtB,WAAKC,WAAL,GAAmBD,UAAU,CAACC,WAA9B;AACA,WAAKC,OAAL,GAAeF,UAAU,CAACE,OAA1B;AACA,WAAKM,OAAL,GAAeR,UAAU,CAACS,cAA1B;AACA,WAAKC,SAAL,GAAiBV,UAAU,CAACW,SAAX,GAAuB,IAAvB,GAA8B,IAAIC,IAAJ,GAAWC,OAAX,EAA/C;AACA,WAAKC,YAAL,CAAkBC,IAAlB,CAAuB,YAAvB,EAAqC;AAAEC,QAAAA,aAAa,EAAE;AAAjB,OAArC;AACD,K,CAED;AACA;;;;6BACU;AACR,aAAO,KAAKf,WAAZ;AACA,aAAO,KAAKC,OAAZ;AACA,aAAO,KAAKQ,SAAZ;AACA,WAAKI,YAAL,CAAkBC,IAAlB,CAAuB,YAAvB,EAAqC,KAArC,EAJQ,CAKR;;AACAjC,MAAAA,MAAM,CAACyB,OAAP,CAAe,GAAf;AACD,K,CAED;;;;sCACmB;AACjB;AACA;AACA,aAAO,IAAIK,IAAJ,GAAWC,OAAX,KAAuB,KAAKH,SAAnC;AACD,K,CAED;;;;mCACgB;AACd,aAAO,KAAKT,WAAZ;AACD,K,CAED;;;;mCACgBgB,E,EAAI;AAClB,aAAO,KAAKT,OAAZ;AACD;;;;;;SA/EkBzB,W","sourcesContent":["import auth0 from 'auth0-js'\r\nimport EventEmitter from 'eventemitter3'\r\nimport router from './../router'\r\n\r\nexport default class AuthService {\r\n  authenticated = this.isAuthenticated()\r\n  authNotifier = new EventEmitter()\r\n\r\n  constructor () {\r\n    this.login = this.login.bind(this)\r\n    this.setSession = this.setSession.bind(this)\r\n    this.logout = this.logout.bind(this)\r\n    this.isAuthenticated = this.isAuthenticated.bind(this)\r\n    this.handleAuthentication = this.handleAuthentication.bind(this)\r\n  }\r\n\r\n  // create an instance of auth0.WebAuth with your\r\n  // API and Client credentials\r\n  auth0 = new auth0.WebAuth({\r\n    domain: 'dev-zy2-swsh.us.auth0.com',\r\n    clientID: '6dQTpEIHS29dhDGLxsMTLhkooeAttBx8',\r\n    redirectUri: 'http://localhost:8080/',\r\n    audience: 'https://django-vuejs-api',\r\n    responseType: 'token id_token',\r\n    scope: 'openid profile'\r\n  })\r\n\r\n  // this method calls the authorize() method\r\n  // which triggers the Auth0 login page\r\n  login () {\r\n    this.auth0.authorize()\r\n  }\r\n\r\n  // this method calls the parseHash() method of Auth0\r\n  // to get authentication information from the callback URL\r\n  handleAuthentication () {\r\n    this.auth0.parseHash((err, authResult) => {\r\n      if (authResult && authResult.accessToken && authResult.idToken) {\r\n        this.setSession(authResult)\r\n      } else if (err) {\r\n        console.log(err)\r\n        alert(`Error: ${err.error}. Check the console for further details.`)\r\n      }\r\n      router.replace('/')\r\n    })\r\n  }\r\n\r\n  // stores the user's access_token, id_token, and a time at\r\n  // which the access_token will expire in the local storage\r\n  setSession (authResult) {\r\n    this.accessToken = authResult.accessToken\r\n    this.idToken = authResult.idToken\r\n    this.profile = authResult.idTokenPayload\r\n    this.expiresAt = authResult.expiresIn * 1000 + new Date().getTime()\r\n    this.authNotifier.emit('authChange', { authenticated: true })\r\n  }\r\n\r\n  // remove the access and ID tokens from the\r\n  // local storage and emits the authChange event\r\n  logout () {\r\n    delete this.accessToken\r\n    delete this.idToken\r\n    delete this.expiresAt\r\n    this.authNotifier.emit('authChange', false)\r\n    // navigate to the home route\r\n    router.replace('/')\r\n  }\r\n\r\n  // checks if the user is authenticated\r\n  isAuthenticated () {\r\n    // Check whether the current time is past the\r\n    // access token's expiry time\r\n    return new Date().getTime() < this.expiresAt\r\n  }\r\n\r\n  // a static method to get the access token\r\n  getAuthToken () {\r\n    return this.accessToken\r\n  }\r\n\r\n  // a method to get the User profile\r\n  getUserProfile (cb) {\r\n    return this.profile\r\n  }\r\n}\r\n"]}]}